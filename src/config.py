PRO_PATH = '/volume1/xuguanggen/competition/unicom'

SHOP_PROFILE = PRO_PATH+'/new/SHOP_PROFILE_NEW.csv'
USER_PROFILE = PRO_PATH+'/new/USER_PROFILE_NEW.csv'
TRAIN = PRO_PATH + '/new/TRAIN_NEW.csv'
TEST = PRO_PATH + '/new/TEST_NEW.csv'
MYTEST = PRO_PATH +'/new/MYTEST.csv'
USER_TRACE = PRO_PATH + '/new/USER_TRACE_NEW.csv'


NUM_NEAREST_SHOPS = 15
NUM_NEAREST_USERS = 8
DESTINATION_NUM_NEAREST_SHOPS = 4

#### num_user_class * num_shop_class #####
import numpy as np
NEIGH_CLASS_SIMILARITY = np.array(
       [[0.047619047619,0.00952380952381,0.790476190476,0.0761904761905,0.00952380952381,0.0857142857143,0.00952380952381,0.00952380952381,0.00952380952381,0.00952380952381],
[0.972286374134,0.000461893764434,0.000461893764434,0.010623556582,0.000461893764434,0.00923787528868,0.0013856812933,0.0013856812933,0.000923787528868,0.00415704387991],
[0,0,0,0,0,0,0,0,0,0],
[0.00340136054422,0.00340136054422,0.316326530612,0.00340136054422,0.00680272108844,0.544217687075,0.0102040816327,0.0884353741497,0.0204081632653,0.0136054421769],
[0.320062785388,0.000142694063927,0.0162671232877,0.000142694063927,0.0142694063927,0.288242009132,0.000570776255708,0.358732876712,0.00128424657534,0.000570776255708],
[0.327817993795,0.00103412616339,0.047569803516,0.00103412616339,0.0403309203723,0.245087900724,0.00310237849018,0.154084798345,0.182006204757,0.00103412616339],
[0.469522908501,0.00216245438573,0.000135153399108,0.000135153399108,0.000135153399108,0.52426003514,0.000135153399108,0.00189214758751,0.000135153399108,0.00216245438573],
[0.335078534031,0.0183246073298,0.124345549738,0.00130890052356,0.0785340314136,0.393979057592,0.00130890052356,0.00130890052356,0.0471204188482,0.00261780104712],
[0.036676403765,0.000324569944823,0.000324569944823,0.000324569944823,0.000324569944823,0.932164881532,0.000324569944823,0.000324569944823,0.0230444660824,0.00811424862058]
])



NEIGH_INCOME_SIMILARITY=np.array([[0.465414567109,0.00732936326157,0.114521300962,0.00137425561154,0.00137425561154,0.0861200183234,0.00137425561154,0.316536875859,0.00320659642694,0.00274851122309],
[0.451404564836,0.000752445447705,0.011161274141,0.00175570604465,0.0107223476298,0.391585151743,0.00050163029847,0.124153498871,0.00664660145473,0.00131677953348],
[0.0809917355372,0.000826446280992,0.000275482093664,0.000275482093664,0.00716253443526,0.842975206612,0.000275482093664,0.00909090909091,0.0506887052342,0.00826446280992]])

NEIGH_ENTERTAINMENT_SIMILARITY=np.array([[0.549155437464,0.000379578667679,0.0137597267034,0.000474473334599,0.00294173467451,0.379009299677,0.000284684000759,0.0441260201177,0.0081609413551,0.00170810400455],
[0.293811610077,0.00547645125958,0.052026286966,0.00492880613363,0.0117743702081,0.289430449069,0.000821467688938,0.332420591457,0.00711938663746,0.00219058050383],
[0.0708706971362,0.000289268151577,0.0271912062482,0.000289268151577,0.000578536303153,0.870407868094,0.000289268151577,0.000289268151577,0.0219843795198,0.00896731269887],
[0.265306122449,0.0204081632653,0.00291545189504,0.0262390670554,0.0291545189504,0.215743440233,0.00583090379009,0.233236151603,0.204081632653,0.00291545189504],
[0.0337078651685,0.00561797752809,0.00561797752809,0.00561797752809,0.0786516853933,0.483146067416,0.0168539325843,0.168539325843,0.219101123596,0.00561797752809],
[0.360381861575,0.000298329355609,0.000298329355609,0.000298329355609,0.0101431980907,0.354415274463,0.000894988066826,0.273568019093,0.000596658711217,0.000298329355609],
[0.390151515152,0.00378787878788,0.00378787878788,0.00378787878788,0.265151515152,0.337121212121,0.00378787878788,0.00378787878788,0.00757575757576,0.00378787878788]
])

NEIGH_BABY_SIMILARITY=np.array([[0.191307839004,0.000100371374084,0.0160594198535,0.00200742748168,0.0197731606946,0.535983137609,0.00100371374084,0.201947204657,0.0288065843621,0.00311151259661],
[0.560013571974,0.00245992026465,0.0227330562389,0.000933073203834,0.000169649673424,0.352192722029,8.48248367122e-05,0.0586139621681,0.00076342353041,0.0021206209178]
])





List_Features = [
        'NEIGHSHOP_ID',
        'NEIGHSHOP_LONLAT',
        'NEIGHSHOP_DISTANCE',
        'NEIGHSHOP_CLASS',
        #'NEIGH_CLASS_SIMILARITY',
        #'NEIGH_INCOME_SIMILARITY',
        #'NEIGH_ENTERTAINMENT_SIMILARITY',
        #'NEIGH_BABY_SIMILARITY',
        #'NEIGH_SIMILARITY',
        #'DESTINATION_NEIGHSHOP_ID',
        'DESTINATION_NEIGHSHOP_LONLAT',
        'DESTINATION_NEIGHSHOP_DISTANCE',
        'DESTINATION_NEIGHSHOP_CLASS',
        'NEIGHUSER_LONLAT',
        'NEIGHUSER_DISTANCE',
        'NEIGHUSER_CLASS',
        'NEIGHUSER_SHOPID',
        'NEIGHUSE_SHOPTYPE',
        'MF_USERFEATURE',
        'MF_LOCFEATURE',
        'MF_USERFEATURE_SHOP'
        #'USER_SVDFEATURE',
        #'LOC_SVDFEATURE'
        #'MF_USERFEATURE_SHOPTYPE'
        #'SHOPTYPE_COUNT'
        #'PASSSHOPTYPE_COUNT'
        ]

Common_Features = [
        #'USERID',
        'LON',
        'LAT',
        'INCOME',
        'ENTERTAINMENT',
        'BABY',
        'GENDER',
        'SHOPPING',
        'HOUR',
        'WEEK',
        'DURATION',
        'DESTINATION_LON',
        'DESTINATION_LAT',
        #'MOSTSHOPTYPE',
        'PASSDISTANCE',
        'PASSTIME',
        'DURATION_LEVEL',
        #'NEIGHSHOP_MOSTTYPE',
        #'NEIGHSHOP_MOSTTYPE_COUNT',
        'NEIGHSHOP_CENTER_DISTANCE',
        'DATE',
        'DIRECTION',
        'ISAWAYCENTER',
        'NEIGHUSER_MOST_GOTO',
        'NEIGHUSER_MOST_SHOPTYPE',
        'RECOMMEND_MOST_TYPE',  ###with this attribute goto mostshoptype
        'LDA_LOCFEATURE'
        ]

Features =[]
for i in range(1,NUM_NEAREST_SHOPS+1):
    Features.append('NEIGHSHOP_ID'+'_'+str(i))
    Features.append('NEIGHSHOP_LON'+'_'+str(i))
    Features.append('NEIGHSHOP_LAT'+'_'+str(i))
    Features.append('NEIGHSHOP_DISTANCE'+'_'+str(i))
    Features.append('NEIGHSHOP_CLASS'+'_'+str(i))
    Features.append('NEIGH_CLASS_SIMILARITY'+'_'+str(i))
    Features.append('NEIGH_INCOME_SIMILARITY'+'_'+str(i))
    Features.append('NEIGH_ENTERTAINMENT_SIMILARITY'+'_'+str(i))
    Features.append('NEIGH_BABY_SIMILARITY'+'_'+str(i))
    Features.append('NEIGH_SIMILARITY'+'_'+str(i))

for i in range(1,DESTINATION_NUM_NEAREST_SHOPS+1):
    Features.append('DESTINATION_NEIGHSHOP_ID'+'_'+str(i))
    Features.append('DESTINATION_NEIGHSHOP_LON'+'_'+str(i))
    Features.append('DESTINATION_NEIGHSHOP_LAT'+'_'+str(i))
    Features.append('DESTINATION_NEIGHSHOP_DISTANCE'+'_'+str(i))
    Features.append('DESTINATION_NEIGHSHOP_CLASS'+'_'+str(i))



for i in range(1,NUM_NEAREST_USERS+1):
    Features.append('NEIGHUSER_LON_'+str(i))
    Features.append('NEIGHUSER_LAT_'+str(i))
    Features.append('NEIGHUSER_DISTANCE_'+str(i))
    Features.append('NEIGHUSER_CLASS_'+str(i))
    Features.append('NEIGHUSER_SHOPID_'+str(i))
    Features.append('NEIGHUSER_SHOPTYPE_'+str(i))

Features = Features + Common_Features


CLUSTER_DICT={
        "2 6 0 5":10, #
        "2 7 0 8":1,
        "2 4 0 6":1,
        "3 5 0 8":1,
        "2 6 0 6":1,
        "3 3 0 9":15, #15
        "2 3 1 8":4,
        "1 1 1 1":1,
        "1 2 1 5":10,
        "1 2 1 4":1, #
        "1 2 0 5":1,
        "1 2 0 6":1,
        "2 1 0 5":1,
        "2 5 0 5":1,
        "2 2 0 5":10, #
        "2 2 0 4":1,
        "2 2 1 8":1,
        "3 1 0 5":1,
        "2 1 1 7":23, # 20,23
        "3 1 0 6":3,
        "2 1 1 2":10, #10 ######
        "2 7 0 5":1,
        "2 4 0 2":1,
        "2 4 0 5":1,
        "3 3 0 2":1,
        "2 1 1 6":1,
        "2 1 0 2":1,
        "1 1 0 2":1,
        "1 2 1 7":1,
        "1 2 0 4":1,
        "1 2 1 8":1,
        "2 2 0 1":1,
        "2 1 0 6":1,
        "3 1 1 7":1,
        "2 5 0 6":1,
        "2 2 0 6":1,
        "2 2 1 2":1,
        "1 1 1 7":1,
        "1 4 1 7":1,
        "1 4 0 4":1
        }
